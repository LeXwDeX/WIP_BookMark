# 浏览器书签工具

## 项目概述
本项目旨在开发一个工具，用于处理和展示浏览器导出的书签文件。用户可以通过该工具选择书签文件，并在网页中以直观的方式查看和管理书签。

## 功能需求

### 1. 文件选择与解析
- 用户可以选择并打开浏览器导出的书签文件（例如：`favorites_2025_2_14.html`）。
- 工具将解析书签文件的内容。

### 2. 网页界面
- **布局**：
  - **左侧边栏**：显示书签名称，支持上下滚动浏览。
  - **右侧展示模块**：显示选中书签的详细信息，包括：
    - 书签标题
    - 完整网址
    - 网站的 AI 摘要
    - 网站的 AI 分配标签
  - **顶部查询模块**：支持模糊查询，用于过滤左侧边栏中显示的书签。
- **错误处理**：
  - 如果书签的网址访问出现问题（如 4xx 或 5xx 错误），则跳过该书签的 AI 摘要和标签更新。

### 3. AI 集成
- 对于可正常访问的网址，使用 AI 生成摘要和标签。AI 模块通过以下步骤完成分析：
  1. 获取书签的 URL。
  2. 打开并提取网页的主要内容（如标题、正文等）。
  3. 调用 OpenAI 接口生成摘要和标签。
  4. 将生成的摘要和标签更新到书签的详细信息中。
- 默认情况下，当用户点击书签标题时，才会触发网页读取和 AI 摘要生成。
- 提供一个“刷新”按钮，用户点击后可异步更新所有书签的摘要和标签。

## 技术要求
- **开发语言**：不限，开发者可根据需求选择合适的语言和框架。
- **书签文件**：项目目录中已包含示例书签文件 `favorites_2025_2_14.html`。

## 项目结构
- `favorites_2025_2_14.html`：示例书签文件。
- `README.md`：项目说明文件。
- `参考模块/`：存放爬虫模块和大模型请求模块。
  - `web_scraper.py`：用于获取网站内容的爬虫模块。
  - `openai_curl_client.py`：用于调用 OpenAI Chat Completion 接口的大模型请求模块。

## 模块说明

### 1. 爬虫模块 (`web_scraper.py`)
- **功能**：从指定的 URL 获取网页内容，并提取标题、作者、发布日期和正文内容。
- **主要方法**：
  - `get_url(url: str, user_agent: Optional[str] = None) -> str`：获取指定 URL 的内容并返回提取的主要信息。
  - `extract_content(html: str) -> dict[str, Any]`：从 HTML 中提取主要内容，包括标题、作者、发布日期和正文。

### 2. 大模型请求模块 (`openai_curl_client.py`)
- **功能**：封装 OpenAI Chat Completion 接口的调用。
- **主要方法**：
  - `chat_completion(api_base, api_key, model, messages)`：调用 OpenAI 接口，返回模型的回复内容。

## 开发步骤
1. 实现文件选择功能，解析书签文件内容。
2. 搭建网页界面，完成左侧边栏、右侧展示模块和顶部查询模块的布局。
3. 集成 AI 功能，生成书签摘要和标签。
4. 实现错误处理逻辑，确保工具的稳定性。

## 使用说明
1. 打开工具，选择书签文件。
2. 在左侧边栏浏览书签，点击书签查看详细信息。
3. 使用顶部查询模块快速查找书签。

## 未来改进
- 支持多种书签文件格式。
- 增加书签的导入和导出功能。
- 提供更多的个性化设置选项。
